---
// Impact Section Elegante - Versione piÃ¹ corta e concisa
// AGGIORNATO: Ora legge i dati da Sanity CMS

import { getLocalized, type Language, type HomePage } from "../lib/sanity";

interface Props {
    lang?: Language;
    data?: HomePage | null;
}

const { lang = "it", data } = Astro.props;

// Helper per ottenere testo localizzato con fallback
const getText = (field: any, fallback: string = "") => {
  if (!field) return fallback;
  return getLocalized(field, lang) || fallback;
};

// Testi - da Sanity con fallback
const impactLabel = getText(data?.impactLabel, "La nostra filosofia");
const impactQuote = getText(data?.impactQuote, "Empatia e presenza per sposi e invitati.");
const impactQuoteHighlight = getText(data?.impactQuoteHighlight, "Un matrimonio che vive nei momenti che crea");
const impactQuoteEnd = getText(data?.impactQuoteEnd, ", non soltanto nelle foto.");
const impactSubtext1 = getText(data?.impactSubtext1, "Fornitori selezionati per ogni bisogno.");
const impactSubtext2 = getText(data?.impactSubtext2, "Un'esperienza che resta nel cuore, oltre le immagini.");
---

<section class="relative py-20 lg:py-28 bg-white overflow-hidden">
    <!-- Pattern geometrico di sfondo -->
    <div class="absolute inset-0 opacity-[0.02]">
        <svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg">
            <defs>
                <pattern
                    id="elegant-grid"
                    x="0"
                    y="0"
                    width="100"
                    height="100"
                    patternUnits="userSpaceOnUse"
                >
                    <path
                        d="M 100 0 L 0 0 0 100"
                        fill="none"
                        stroke="#7d8b6e"
                        stroke-width="1"></path>
                </pattern>
            </defs>
            <rect width="100%" height="100%" fill="url(#elegant-grid)"></rect>
        </svg>
    </div>

    <div class="container mx-auto px-8 lg:px-16 relative">
        <!-- Header semplificato -->
        <div class="max-w-4xl mx-auto text-center mb-16 fade-in">
            <div class="flex items-center justify-center mb-6">
                <div class="w-16 h-px bg-primary"></div>
                <span
                    class="mx-4 text-xs tracking-[0.4em] text-gray-600 uppercase font-light"
                >
                    {impactLabel}
                </span>
                <div class="w-16 h-px bg-primary"></div>
            </div>
        </div>

        <!-- Citazione principale unica -->
        <div class="max-w-4xl mx-auto text-center fade-in fade-in-delay-1">
            <!-- Virgoletta decorativa -->
            <div
                class="text-[80px] font-serif text-primary/10 leading-none mb-[-20px]"
            >
                "
            </div>

            <!-- Testo principale -->
            <blockquote
                class="text-2xl md:text-3xl lg:text-4xl font-light text-gray-900 leading-relaxed mb-8"
            >
                {impactQuote}
                <br class="hidden md:block" />
                <span class="text-primary italic"
                    >{impactQuoteHighlight}</span
                >{impactQuoteEnd}
            </blockquote>

            <!-- Separatore -->
            <div class="flex items-center justify-center mb-8">
                <div class="w-12 h-px bg-primary"></div>
                <div class="mx-3 w-1.5 h-1.5 rounded-full bg-primary"></div>
                <div class="w-12 h-px bg-primary"></div>
            </div>

            <!-- Sotto-testo -->
            <div class="max-w-2xl mx-auto space-y-4">
                <p class="text-lg font-light text-gray-600">
                    {impactSubtext1}
                </p>
                <p class="text-lg font-light text-gray-600">
                    {impactSubtext2}
                </p>
            </div>
        </div>
    </div>
</section>
