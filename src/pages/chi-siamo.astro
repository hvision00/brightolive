---
import BaseLayout from "../layouts/BaseLayout.astro";
import { getAboutPage, getLocalized, getLocalizedArray, getImageUrl, type Language } from "../lib/sanity";

const lang: Language = "it";

// Fetch dati da Sanity
const aboutPage = await getAboutPage();

// Prefisso per i link
const langPrefix = lang === "it" ? "" : `/${lang}`;

// Helper per ottenere testo localizzato con fallback
const getText = (field: any, fallback: string = "") => {
  if (!field) return fallback;
  return getLocalized(field, lang) || fallback;
};

// Dati con fallback
const heroQuote = getText(aboutPage?.heroQuote, "Dietro ogni grande matrimonio, c'è qualcuno che guarda l'orologio mentre gli altri si divertono.");
const heroAuthor = aboutPage?.heroAuthor || "Sara De Coppi";
const heroRole = aboutPage?.heroRole || "EVENT AND WEDDING CREATOR";

const introLabel = getText(aboutPage?.introLabel, "Sara De Coppi");
const introTitle = getText(aboutPage?.introTitle, "Chi sono");
const introName = aboutPage?.introName || "Sara De Coppi";
const introLocation = aboutPage?.introLocation || "Cison di Valmarino";
const introText1 = getText(aboutPage?.introText1, "Sono una event and wedding creator, oltre ad essere di supporto ad altre professioniste Wedding Planner come wedding coordinator.");
const introText2 = getText(aboutPage?.introText2, "Il mio lavoro non è creare scenografie spettacolari, ma far sì che tutto funzioni senza che tu te ne accorga.");
const introText3 = getText(aboutPage?.introText3, "Sto dietro le quinte. Mi assicuro che tutto fili liscio, che ogni dettaglio sia al posto giusto, che tu possa solo goderti la giornata.");
const introText4 = getText(aboutPage?.introText4, "Raccontami i tuoi sogni, il tuo modo di essere e le tue aspettative.");
const introImageUrl = getImageUrl(aboutPage?.introImage, 600);

const missionLabel = getText(aboutPage?.missionLabel, "La missione");
const missionTitle = getText(aboutPage?.missionTitle, "Cosa faccio per te");
const missionPoints = getLocalizedArray(aboutPage?.missionPoints, lang);
const missionPointsFallback = [
    "Offrire supporto vero e concreto a chi vuole vivere un matrimonio in Italia",
    "Aiutare ogni coppia a sentirsi accolta, sicura e ascoltata",
    "Trasformare il disordine in armonia",
    "Portare leggerezza, non sovrastruttura"
];
const missions = missionPoints.length > 0 ? missionPoints : missionPointsFallback;

const styleLabel = getText(aboutPage?.styleLabel, "Il mio approccio");
const styleTitle = getText(aboutPage?.styleTitle, "Uno stile che racconta");
const styleSubtitle = getText(aboutPage?.styleSubtitle, "Autenticità");
const styleText1 = getText(aboutPage?.styleText1, "Mi piacciono i matrimoni semplici e naturali. Quelli dove vedi più fiori di campo che composizioni elaborate, più lino che raso, più legno che cristallo.");
const styleText2 = getText(aboutPage?.styleText2, "Boho-chic, vintage, rustico-elegante. Chiamalo come vuoi — l'importante è che sia autentico.");
const styleKeywords = getText(aboutPage?.styleKeywords, "Boho-chic • Vintage • Natura • Autenticità");

const whyLabel = getText(aboutPage?.whyLabel, "Il nome");
const whyTitle = getText(aboutPage?.whyTitle, "Perché");
const whyHighlight = aboutPage?.whyHighlight || "BrightOlive";
const whyText1 = getText(aboutPage?.whyText1, "BrightOlive viene da due parole semplici.");
const whyBright = getText(aboutPage?.whyBright, "Bright, luminoso. Come dovrebbe essere il tuo matrimonio: pieno di luce, sorrisi veri, momenti che ricordi.");
const whyOlive = getText(aboutPage?.whyOlive, "Olivo, l'ulivo. Da sempre simbolo di pace e armonia. Perché un matrimonio deve essere sereno, non stressante.");
const whyConclusion = getText(aboutPage?.whyConclusion, "Un nome semplice, per matrimoni autentici.");

const ctaTitle = getText(aboutPage?.ctaTitle, "Vuoi conoscermi meglio?");
const ctaText = getText(aboutPage?.ctaText, "Raccontami del tuo matrimonio e scopriamo insieme come posso aiutarti a realizzare il giorno perfetto.");
const ctaButton = getText(aboutPage?.ctaButton, "Contattami");
---

<BaseLayout
    title="Chi Siamo - Sara De Coppi Wedding Planner | BrightOlive Veneto"
    description="Scopri Sara De Coppi, wedding planner certificata a Cison di Valmarino (TV). Specializzata in matrimoni eleganti e destination wedding nel Veneto. 15+ anni di esperienza."
    image="/og-image.jpg"
>
    <!-- Hero con Citazione -->
    <section class="relative min-h-[60vh] bg-neutral flex items-center justify-center overflow-hidden">
        <!-- Pattern decorativo sottile -->
        <div class="absolute inset-0 opacity-[0.03]">
            <svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg">
                <defs>
                    <pattern
                        id="about-dots"
                        x="0"
                        y="0"
                        width="40"
                        height="40"
                        patternUnits="userSpaceOnUse"
                    >
                        <circle cx="20" cy="20" r="1" fill="#7d8b6e"></circle>
                    </pattern>
                </defs>
                <rect width="100%" height="100%" fill="url(#about-dots)"></rect>
            </svg>
        </div>

        <div class="container mx-auto px-8 lg:px-16 relative">
            <div class="max-w-4xl mx-auto text-center">
                <!-- Virgoletta decorativa -->
                <div class="text-[120px] font-serif text-primary/10 leading-none mb-[-30px] fade-in">
                    "
                </div>

                <!-- Citazione -->
                <blockquote class="text-2xl md:text-3xl lg:text-4xl font-light text-gray-900 leading-relaxed mb-8 fade-in fade-in-delay-1">
                    {heroQuote}
                </blockquote>

                <!-- Separatore -->
                <div class="flex items-center justify-center mb-6 fade-in fade-in-delay-2">
                    <div class="w-16 h-px bg-primary"></div>
                    <div class="mx-4 w-1.5 h-1.5 rounded-full bg-primary"></div>
                    <div class="w-16 h-px bg-primary"></div>
                </div>

                <!-- Autore -->
                <div class="fade-in fade-in-delay-3">
                    <p class="text-lg font-light text-gray-900">{heroAuthor}</p>
                    <p class="text-sm tracking-[0.3em] uppercase text-gray-500 font-light mt-1">
                        {heroRole}
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Sezione Chi Sono -->
    <section class="py-24 lg:py-32 bg-white">
        <div class="container mx-auto px-8 lg:px-16">
            <div class="grid lg:grid-cols-12 gap-12 lg:gap-16 items-center">
                <!-- Colonna Sinistra - Testo -->
                <div class="lg:col-span-7 fade-in">
                    <!-- Label -->
                    <div class="flex items-center mb-6">
                        <div class="w-16 h-px bg-primary"></div>
                        <span class="ml-4 text-xs tracking-[0.4em] text-gray-600 uppercase font-light">
                            {introLabel}
                        </span>
                    </div>

                    <!-- Titolo -->
                    <h2 class="text-4xl md:text-5xl lg:text-6xl font-light text-gray-900 mb-8 leading-tight">
                        {introTitle}
                    </h2>

                    <!-- Testi -->
                    <div class="space-y-6 text-base md:text-lg font-light text-gray-600 leading-relaxed">
                        <p class="text-gray-900 font-normal">{introText1}</p>
                        <p>{introText2}</p>
                        <p>{introText3}</p>
                        <p class="text-primary italic">{introText4}</p>
                    </div>

                    <!-- Dettagli -->
                    <div class="mt-8 pt-8 border-t border-gray-200">
                        <div class="flex items-center space-x-4">
                            <div class="w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center">
                                <svg class="w-6 h-6 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                </svg>
                            </div>
                            <div>
                                <p class="text-sm font-light text-gray-500 uppercase tracking-wide">Based in</p>
                                <p class="text-base font-normal text-gray-900">{introLocation}</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Colonna Destra - Immagine -->
                <div class="lg:col-span-5 fade-in fade-in-delay-1">
                    <div class="relative">
                        {introImageUrl ? (
                            <div class="aspect-3/4 relative overflow-hidden">
                                <img src={introImageUrl} alt={introName} class="w-full h-full object-cover" />
                            </div>
                        ) : (
                            <div class="aspect-3/4 bg-gray-200 relative overflow-hidden">
                                <div class="absolute inset-0 flex items-center justify-center">
                                    <div class="text-center">
                                        <svg class="w-16 h-16 mx-auto text-gray-400 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                                        </svg>
                                        <p class="text-sm text-gray-400">Foto di {introName}</p>
                                    </div>
                                </div>
                            </div>
                        )}

                        <!-- Decorazione -->
                        <div class="absolute -bottom-6 -right-6 w-32 h-32 bg-primary/10 -z-10"></div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Sezione Missione -->
    <section class="py-24 lg:py-32 bg-neutral">
        <div class="container mx-auto px-8 lg:px-16">
            <!-- Header -->
            <div class="text-center max-w-3xl mx-auto mb-16 fade-in">
                <div class="flex items-center justify-center mb-6">
                    <div class="w-16 h-px bg-primary"></div>
                    <span class="mx-4 text-xs tracking-[0.4em] text-gray-600 uppercase font-light">
                        {missionLabel}
                    </span>
                    <div class="w-16 h-px bg-primary"></div>
                </div>

                <h2 class="text-4xl md:text-5xl font-light text-gray-900 mb-6">
                    {missionTitle}
                </h2>
            </div>

            <!-- Grid valori -->
            <div class="grid md:grid-cols-2 gap-8 max-w-5xl mx-auto">
                {missions.map((mission, index) => (
                    <div class={`bg-white p-8 lg:p-10 fade-in fade-in-delay-${index + 1}`}>
                        <!-- Numero -->
                        <div class="text-6xl font-light text-primary/20 mb-4">
                            0{index + 1}
                        </div>

                        <!-- Testo -->
                        <p class="text-lg font-light text-gray-700 leading-relaxed">
                            {mission}
                        </p>
                    </div>
                ))}
            </div>
        </div>
    </section>

    <!-- Sezione Stile -->
    <section class="py-24 lg:py-32 bg-white">
        <div class="container mx-auto px-8 lg:px-16">
            <div class="grid lg:grid-cols-12 gap-12 lg:gap-16 items-center">
                <!-- Colonna Sinistra - Immagine -->
                <div class="lg:col-span-5 fade-in">
                    <div class="relative">
                        <div class="aspect-4/5 relative overflow-hidden">
                            <img 
                                src="/gallery/gallery-8.jpg" 
                                alt="Stile boho-chic matrimonio" 
                                class="w-full h-full object-cover"
                            />
                        </div>

                        <!-- Decorazione -->
                        <div class="absolute -top-6 -left-6 w-32 h-32 bg-primary/10 -z-10"></div>
                    </div>
                </div>

                <!-- Colonna Destra - Testo -->
                <div class="lg:col-span-7 fade-in fade-in-delay-1">
                    <!-- Label -->
                    <div class="flex items-center mb-6">
                        <div class="w-16 h-px bg-primary"></div>
                        <span class="ml-4 text-xs tracking-[0.4em] text-gray-600 uppercase font-light">
                            {styleLabel}
                        </span>
                    </div>

                    <!-- Titolo -->
                    <h2 class="text-4xl md:text-5xl font-light text-gray-900 mb-4">
                        {styleTitle}
                    </h2>

                    <p class="text-xl font-light text-primary italic mb-8">
                        {styleSubtitle}
                    </p>

                    <!-- Separatore -->
                    <div class="flex items-center mb-8">
                        <div class="w-12 h-px bg-primary"></div>
                        <div class="mx-3 w-1 h-1 rounded-full bg-primary"></div>
                        <div class="w-12 h-px bg-primary"></div>
                    </div>

                    <!-- Testi -->
                    <div class="space-y-6 text-base md:text-lg font-light text-gray-600 leading-relaxed mb-8">
                        <p>{styleText1}</p>
                        <p>{styleText2}</p>
                    </div>

                    <!-- Keywords -->
                    <div class="flex flex-wrap gap-3">
                        {styleKeywords.split(" • ").map((keyword: string) => (
                            <span class="px-4 py-2 border border-primary/30 text-sm font-light text-gray-700 tracking-wide">
                                {keyword}
                            </span>
                        ))}
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Sezione BrightOlive Story -->
    <section class="py-24 lg:py-32 bg-primary text-white relative overflow-hidden">
        <!-- Pattern decorativo -->
        <div class="absolute inset-0 opacity-5">
            <svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg">
                <defs>
                    <pattern id="olive-pattern" x="0" y="0" width="60" height="60" patternUnits="userSpaceOnUse">
                        <circle cx="30" cy="30" r="1.5" fill="white"></circle>
                    </pattern>
                </defs>
                <rect width="100%" height="100%" fill="url(#olive-pattern)"></rect>
            </svg>
        </div>

        <div class="container mx-auto px-8 lg:px-16 relative">
            <div class="max-w-4xl mx-auto">
                <!-- Label -->
                <div class="flex items-center justify-center mb-6 fade-in">
                    <div class="w-16 h-px bg-white/40"></div>
                    <span class="mx-4 text-xs tracking-[0.4em] uppercase font-light">
                        {whyLabel}
                    </span>
                    <div class="w-16 h-px bg-white/40"></div>
                </div>

                <!-- Titolo -->
                <h2 class="text-4xl md:text-5xl lg:text-6xl font-light text-center mb-12 fade-in fade-in-delay-1">
                    {whyTitle} <span class="italic font-normal">{whyHighlight}</span>
                </h2>

                <!-- Contenuto -->
                <div class="space-y-8 text-lg md:text-xl font-light leading-relaxed fade-in fade-in-delay-2">
                    <p>{whyText1}</p>
                    
                    <div class="pl-6 border-l-2 border-white/30">
                        <p class="mb-4"><strong class="font-normal">Bright</strong> {whyBright.replace(/^Bright,?\s*/i, "")}</p>
                        <p><strong class="font-normal">Olivo</strong> {whyOlive.replace(/^Olivo,?\s*/i, "")}</p>
                    </div>

                    <p class="text-center italic">{whyConclusion}</p>
                </div>
            </div>
        </div>
    </section>

    <!-- CTA Finale -->
    <section class="py-24 lg:py-32 bg-white">
        <div class="container mx-auto px-8 lg:px-16">
            <div class="max-w-3xl mx-auto text-center fade-in">
                <div class="flex items-center justify-center mb-8">
                    <div class="w-16 h-px bg-primary"></div>
                    <div class="mx-4 w-1.5 h-1.5 rounded-full bg-primary"></div>
                    <div class="w-16 h-px bg-primary"></div>
                </div>

                <h2 class="text-3xl md:text-4xl font-light text-gray-900 mb-6">
                    {ctaTitle}
                </h2>

                <p class="text-lg font-light text-gray-600 leading-relaxed mb-8">
                    {ctaText}
                </p>

                <a
                    href={langPrefix + "/contatti"}
                    class="inline-flex items-center justify-center px-10 py-4 bg-primary text-white text-sm font-light tracking-wider uppercase hover:bg-secondary transition-all duration-300"
                >
                    {ctaButton}
                </a>
            </div>
        </div>
    </section>
</BaseLayout>
